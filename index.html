<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Arco Blog</title>
    <link rel="stylesheet" href="assets/style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

<header>
    <div class="header-container">
        <div class="logo">
            <!------
            <img src="your-logo-link.png" alt="Logo">
            -------->
            <span>Pixel Arco</span>
        </div>
        <nav>
            <a href="index.html">Trang chủ</a>
        </nav>
    </div>
</header>

<main>
    <div id="content-wrapper">
        <article id="post-content" class="hidden post-detail"></article>

        <div id="post-list" class="hidden">
            <h2 class="section-title">Các bài viết khác</h2>
            <ul id="list-container"></ul>
        </div>
    </div>
</main>

    <footer>
        <p>Pixel Arco</p>
    </footer>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const postName = urlParams.get('post');
    const postList = document.getElementById('post-list');
    const postContent = document.getElementById('post-content');
    const listContainer = document.getElementById('list-container');

    // 1. Luôn load danh sách bài viết (hiện ở dưới)
    postList.classList.remove('hidden');
    fetch('./posts.json')
        .then(res => res.json())
        .then(posts => {
            listContainer.innerHTML = posts.map(post => `
                <li>
                    <a href="?post=${post.slug}">${post.title}</a>
                    <p style="color: #888; font-size: 0.85rem; margin: 0;">Xem chi tiết...</p>
                </li>
            `).join('');
        });

    // 2. Nếu người dùng đang xem một bài viết cụ thể
    if (postName) {
        postContent.classList.remove('hidden');
        fetch(`./content/${postName}.md`)
            .then(res => {
                if(!res.ok) throw new Error();
                return res.text();
            })
            .then(md => {
                postContent.innerHTML = marked.parse(md);
                // Cuộn lên đầu trang để đọc bài
                window.scrollTo({ top: 0, behavior: 'smooth' });
            })
            .catch(() => {
                postContent.innerHTML = "<h2>404</h2><p>Không tìm thấy bài viết này.</p>";
            });
    }
</script>
</body>
</html>
